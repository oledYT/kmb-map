<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>公交线路地图</title>
  <style>
    html, body, #map {
      margin: 0;
      height: 100%;
      width: 100%;
    }
  </style>
  <script src="https://map.qq.com/api/gljs?v=1.exp&key=FNMBZ-RKIWB-MQ3UL-NKSLR-H5SFF-JQBNG"></script>
</head>
<body>
  <div id="map"></div>

  <script>
            window.initMap = function() {
            window.map = new TMap.Map("map-container", {
                center: new TMap.LatLng(22.318125, 114.191562),
                zoom: 13
            });
            window.polylineLayer = new TMap.MultiPolyline({
                map: window.map,
                styles: {
                    "routeStyle": new TMap.PolylineStyle({
                        color: "#FF0000",
                        width: 5
                    })
                },
                geometries: []
            });
        };

        // 全局定义绘制函数
        window.drawRoute = function(latLngArray) {
            if (!window.polylineLayer) {
                console.error("polylineLayer 未初始化！");
                return;
            }
            const path = latLngArray.map(coord => new TMap.LatLng(coord[0], coord[1]));
            window.polylineLayer.setGeometries([{
                id: "route1",
                styleId: "routeStyle",
                paths: path
            }]);
        };

        // 页面加载后初始化地图
        window.onload = initMap;
  </script>
</body>
</html>


