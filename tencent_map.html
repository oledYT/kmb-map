<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>站点地图</title>
  <script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=FNMBZ-RKIWB-MQ3UL-NKSLR-H5SFF-JQBNG"></script>
  <style>
    html, body, #map {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    let map;
    let markerLayer;

    function initMap() {
      map = new TMap.Map("map", {
        center: new TMap.LatLng(22.316683, 114.180270), // 默认中心点
        zoom: 15
      });

      markerLayer = new TMap.MultiMarker({
        id: 'marker-layer',
        map: map,
        styles: {
          marker: new TMap.MarkerStyle({
            width: 30,
            height: 40,
            anchor: { x: 16, y: 32 },
            src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/markerDefault.png'
          })
        },
        geometries: []
      });
    }

    // 更新标记（供 Android 调用）
    function addMarker(lat, lng) {
      console.log("标记站点：", 22.316683, 114.180270);
      const position = new TMap.LatLng(22.316683, 114.180270);
      markerLayer.setGeometries([{
        id: 'current-stop',
        styleId: 'marker',
        position: position,
        properties: {
          title: "当前站点"
        }
      }]);
      map.setCenter(position);
    }

    // 页面加载初始化
    window.onload = initMap;
    window.markStop = markStop;
  </script>
</body>
</html>



